# Домашнее задание к занятию «Резервное копирование баз данных» Соколов Тимофей

**Домашнее задание выполните в Google Docs или в md-файле в вашем репозитории GitHub.** 

Для оформления вашего решения в GitHub можете воспользоваться [шаблоном](https://github.com/netology-code/sys-pattern-homework).

Название файла должно содержать номер лекции и фамилию студента. Пример названия: «12.8. Резервное копирование баз данных — Александр Александров».

Перед тем как выслать ссылку, убедитесь, что её содержимое не является приватным, то есть открыто на просмотр всем, у кого есть ссылка. Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

Для восстановления за предыдущий день лучше всего подходит схема с ежедневным полным бэкапом.
Каждую ночь создается полная копия всех данных. Чтобы восстановить систему, просто разворачиваешь вчерашний бэкап. Это просто и надежно.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

Здесь потребуются:
— Полный бэкап (например, раз в неделю) — как основа.
— Дифференциальный бэкап (ежедневно) — чтобы не накатывать все журналы с начала недели.
— Частое копирование журналов транзакций (каждый час или чаще) — это самое главное.

Восстанавливаешь последний полный бэкап, потом последний дифференциальный, а затем накатываешь все журналы транзакций до нужного момента времени (за час до сбоя). 
Это позволяет откатить базу на любой конкретный момент.

*Приведите ответ в свободной форме.*

---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).


Создание: pg_dump -Fc -U postgres -f /backups/my_db.dump my_db
Восстановление: pg_restore -U postgres -d my_new_db /backups/my_db.dump


*Приведите ответ в свободной форме.*

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 

Сначала полная копия: mysqldump -u root -p --single-transaction --flush-logs --master-data=2 --databases mydb > full_backup.sql

Инкрементная копия: Просто копируем бинарные логи, созданные после полного бэкапа из директории данных MySQL (например, /var/lib/mysql/).
Фалы, типа mysql-bin.000001, mysql-bin.000002 и т.п.

Сначала восстанавливаем из полного бэкапа (full_backup.sql), затем накатываем все последующие бинарные логи черз mysqlbinlog,
чтобы восстановить все изменения до нужного момента.

*Приведите ответ в свободной форме.*
